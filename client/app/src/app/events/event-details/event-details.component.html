<div class="container">
  <div class="row">
    <div class="col-12 pb-0 bg-dark text-white" style="margin-top: 150px">
      <br />
      <div class="d-flex flex-row justify-content-between">
        <h1 class="ms-5 me-5 mb-4" style="margin-top: 10px">
          {{ event?.event.name }}
        </h1>

        <h2
          class="ms-5 me-5 mb-4"
          (click)="setCurrentView(5)"
          style="vertical-align: middle"
          display="flex;"
        >
          <p-button
            (click)="showSignupForm()"
            icon="pi pi-angle-double-right"
            iconPos="right"
            label="Dołącz"
          ></p-button>
          <p-dialog
            header="Formularz zgłoszeniowy"
            [(visible)]="displaySignupForm"
            [style]="{ width: '30vw' }"
          >
            <app-event-signup> </app-event-signup>
            <ng-template pTemplate="footer">
              <p-button
                (click)="displaySignupForm = false"
                label="Zamknij"
                styleClass="p-button-text"
              ></p-button>
            </ng-template>
          </p-dialog>
        </h2>
      </div>
    </div>
    <br />
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-12 bg-secondary">
      <div class="m-1" style="display: flex">
        <app-round-card></app-round-card>
        <div class="container">
          <div class="row">
            Serwer:
            {{ activeRound.serverName }}
          </div>
          <div class="row">
            Password:
            {{ activeRound.serverPassword }}
          </div>
        </div>
      </div>

      <p-button label="Potwierdź" icon="pi pi-check" *ngIf="timeToSign() > 0"
        >Potwierdź {{ timeToSignAsString() }}</p-button
      >
    </div>
  </div>
  <div class="row">
    <div class="col-12 bg-secondary text-white">
      <br />
      <div class="row text-center">
        <p-tabView>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-info p-2"></i> Info
            </ng-template>

            <app-event-info></app-event-info>
          </p-tabPanel>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-sheet-plastic p-2"></i> Regulamin
            </ng-template>
            <app-event-rules></app-event-rules>
          </p-tabPanel>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-chalkboard-user p-2"></i> Rundy
            </ng-template>
            <app-event-rounds *ngIf="rounds"
              [rounds]=" rounds"
            ></app-event-rounds>
          </p-tabPanel>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-user p-2"></i> Kierowcy
            </ng-template>
            <app-driver-list></app-driver-list>
          </p-tabPanel>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-chalkboard-user p-2"></i> Klasyfikacja
            </ng-template>
            <app-event-results></app-event-results>
          </p-tabPanel>

          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-users p-2"></i> Zespoły
            </ng-template>
            <app-event-teams></app-event-teams>
          </p-tabPanel>
          <p-tabPanel>
            <ng-template pTemplate="header">
              <i class="fa-solid fa-chalkboard p-2"></i> Punktacja
            </ng-template>
            <app-event-points></app-event-points>
          </p-tabPanel>
        </p-tabView>
      </div>
    </div>
  </div>
</div>
<p-button
  class="bottom-right"
  (click)="showRoundCreator()"
  icon="pi pi-plus"
  label="Dodaj rundę"
></p-button>
<p-dialog
  header="Dodaj kolejną rundę"
  [(visible)]="displayBasic"
  [style]="{ width: '50vw', height: '30vh' }"
  [contentStyle]="{ overflow: 'visible' }"
  [draggable]="false"
  [resizable]="false"
>
  <app-event-round-creator></app-event-round-creator>
  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-check"
      (click)="displayBasic = false"
      label="Ok"
      styleClass="p-button-text"
    ></p-button>
  </ng-template>
</p-dialog>
